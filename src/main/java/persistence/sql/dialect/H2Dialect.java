package persistence.sql.dialect;

import jakarta.persistence.GenerationType;
import java.sql.Types;
import java.util.UUID;

public class H2Dialect extends Dialect {
    public H2Dialect() {
        registerColumnType(Types.BIGINT, "bigint");
        registerColumnType(Types.INTEGER, "integer");
        registerColumnType(Types.VARCHAR, "varchar(255)");
    }

    @Override
    public String generatorCreateDdl(final GenerationType generationType) {
        if (GenerationType.IDENTITY == generationType) {
            return " generated by default as identity";
        }

        return "";
    }

    @Override
    public String generatorKeyValue(final GenerationType strategy) {
        if (strategy == GenerationType.IDENTITY) {
            return "default";
        }

        return UUID.randomUUID().toString();
    }
}
