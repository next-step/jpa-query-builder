package persistence.sql.dialect;

import jakarta.persistence.GeneratedValue;
import jakarta.persistence.GenerationType;
import java.util.Map;
import persistence.meta.vo.EntityField;

public class H2Dialect implements Dialect {
    private static final Map<Class<?>, String> fieldTypeMap = Map.of(
        String.class, "varchar",
        Integer.class, "integer",
        Long.class, "bigint"
    );

    @Override
    public void getDialectType() {
        return;
    }

    @Override
    public String getFieldType(EntityField entityField) {
        String result = fieldTypeMap.get(entityField.getFieldType());
        if (result == null) {
            throw new RuntimeException("지원하지 않는 필드타입입니다");
        }
        return result;
    }

    @Override
    public String getGenerationTypeSql(GeneratedValue generatedValue) {
        if (generatedValue == null) {
            return "";
        }
        if (generatedValue.strategy() == GenerationType.IDENTITY) {
            return " generated by default as identity";
        }
        throw new UnsupportedOperationException();
    }


}
